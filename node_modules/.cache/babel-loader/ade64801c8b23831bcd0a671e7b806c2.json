{"ast":null,"code":"var _jsxFileName = \"/Users/neelpatel/Desktop/Classes/342/Project/frontend-react/src/components/pages/Checkout.js\";\nimport React from 'react';\nimport { Redirect } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Card extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      amountToBuy: 0,\n      isDelivery: false\n    };\n    this.handleCheckboxChange = this.handleCheckboxChange.bind(this);\n  }\n\n  handleCheckboxChange(event) {\n    const checked = event.target.checked;\n    this.setState({\n      [event.target.name]: checked\n    });\n    this.props.updateItemInCart(this.props.id, checked);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"itemColumns\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"itemValues\",\n        align: \"center\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Seller: \", this.props.seller]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Name: \", this.props.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Pickup: \", this.props.pickup]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Delivery: $\", this.props.delivery]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Amount to buy: \", this.props.amountToBuy]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Total price: $\", this.props.totalPriceForItem]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"itemButton\",\n          onClick: () => {\n            this.props.removeFromCart(this.props.id);\n          },\n          children: \"Remove from Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          id: \"delivery\",\n          name: \"isDelivery\",\n          checked: this.state.isDelivery,\n          onChange: this.handleCheckboxChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"delivery\",\n          children: \" Delivery?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default class Checkout extends React.Component {\n  constructor(props) {\n    super(props);\n    var user;\n\n    if (this.props.location.state === undefined) {\n      user = \"\";\n    } else {\n      user = this.props.location.state.user;\n    }\n\n    let newItems = this.props.location.state.cart;\n    let totalPrice = 0;\n\n    for (let i = 0; i < newItems.length; i++) {\n      newItems[i].totalPriceForItem = +newItems[i].price * +newItems[i].amountToBuy;\n      totalPrice += newItems[i].totalPriceForItem;\n      newItems[i].totalPriceForItem = Math.round(newItems[i].totalPriceForItem * 100) / 100;\n      totalPrice = Math.round(totalPrice * 100) / 100;\n    }\n\n    this.state = {\n      user: user,\n      items: newItems,\n      total: totalPrice\n    };\n    this.onShop = this.onShop.bind(this);\n    this.clearCart = this.clearCart.bind(this);\n    this.calculateTotal = this.calculateTotal.bind(this);\n    this.updateItemInCart = this.updateItemInCart.bind(this);\n    this.removeFromCart = this.removeFromCart.bind(this);\n    this.purchase = this.purchase.bind(this);\n  }\n\n  calculateTotal() {\n    let newTotal = 0;\n\n    for (let i = 0; i < this.state.items.length; i++) {\n      newTotal += this.state.items[i].totalPriceForItem;\n    }\n\n    newTotal = Math.round(newTotal * 100) / 100;\n    this.setState({\n      total: newTotal\n    });\n  }\n\n  onShop() {\n    this.setState({\n      shop: true\n    });\n  }\n\n  clearCart() {\n    this.setState({\n      items: []\n    });\n    this.setState({\n      total: 0\n    });\n  }\n\n  updateItemInCart(idx, isDelivery) {\n    let newItems = this.state.items;\n    newItems[idx].totalPriceForItem = +newItems[idx].price * +newItems[idx].amountToBuy;\n\n    if (isDelivery) {\n      newItems[idx].totalPriceForItem = +newItems[idx].totalPriceForItem + +newItems[idx].delivery;\n    }\n\n    newItems[idx].totalPriceForItem = Math.round(newItems[idx].totalPriceForItem * 100) / 100;\n    this.setState({\n      items: newItems\n    });\n    this.calculateTotal();\n  }\n\n  removeFromCart(idx) {\n    let newItems = this.state.items;\n    newItems.splice(idx, 1);\n    this.setState({\n      items: newItems\n    });\n    this.calculateTotal();\n  }\n\n  async deleteFood(seller, name) {\n    await fetch(`http://localhost:8080/foodItem/${seller}/${name}`, {\n      method: 'DELETE'\n    }).then(response => {// Do nothing\n    }).catch(err => {\n      throw new Error(err);\n    });\n  }\n\n  async putFood(newItem) {\n    await fetch('http://localhost:8080/foodItem', {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(newItem)\n    }).then(response => {// Do nothing\n    }).catch(err => {\n      throw new Error(err);\n    });\n  }\n\n  async purchase() {\n    if (this.state.items.length <= 0) {\n      return;\n    }\n\n    for (let i = 0; i < this.state.items.length; i++) {\n      let newItem = {\n        seller: this.state.items[i].seller,\n        name: this.state.items[i].name,\n        price: this.state.items[i].price,\n        amount: this.state.items[i].amount,\n        pickup: this.state.items[i].pickup,\n        delivery: this.state.items[i].delivery\n      };\n\n      if (newItem.amount <= 0) {\n        await this.deleteFood(newItem.seller, newItem.name);\n      } else {\n        await this.putFood(newItem);\n      }\n    }\n\n    this.setState({\n      items: []\n    });\n    this.setState({\n      total: 0\n    });\n    alert(\"Thank you for your purchase!\");\n  }\n\n  renderCards() {\n    var cards = [];\n\n    for (let i = 0; i < this.state.items.length; i++) {\n      cards.push( /*#__PURE__*/_jsxDEV(Card, {\n        id: i,\n        seller: this.state.items[i].seller,\n        name: this.state.items[i].name,\n        totalPriceForItem: this.state.items[i].totalPriceForItem,\n        amountToBuy: this.state.items[i].amountToBuy,\n        pickup: this.state.items[i].pickup,\n        delivery: this.state.items[i].delivery,\n        updateItemInCart: this.updateItemInCart,\n        removeFromCart: this.removeFromCart\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 18\n      }, this));\n    }\n\n    return cards;\n  }\n\n  render() {\n    if (this.state.user === \"\") {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 11\n      }, this);\n    }\n\n    if (this.state.shop) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: {\n          pathname: '/Shop',\n          state: {\n            user: this.state.user,\n            cart: this.state.items\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"content-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"pageheader\",\n          children: [\"Checkout for: \", this.state.user]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"pageheader\",\n          children: [\"Total: $\", this.state.total]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"selectButton\",\n          onClick: this.purchase,\n          children: \"Purchase\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"selectButton\",\n          onClick: this.onShop,\n          children: \"Return to shopping\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"selectButton\",\n          onClick: this.clearCart,\n          children: \"Clear Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this), this.renderCards(), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/neelpatel/Desktop/Classes/342/Project/frontend-react/src/components/pages/Checkout.js"],"names":["React","Redirect","Card","Component","constructor","props","state","amountToBuy","isDelivery","handleCheckboxChange","bind","event","checked","target","setState","name","updateItemInCart","id","render","seller","pickup","delivery","totalPriceForItem","removeFromCart","Checkout","user","location","undefined","newItems","cart","totalPrice","i","length","price","Math","round","items","total","onShop","clearCart","calculateTotal","purchase","newTotal","shop","idx","splice","deleteFood","fetch","method","then","response","catch","err","Error","putFood","newItem","headers","body","JSON","stringify","amount","alert","renderCards","cards","push","pathname"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Redirect } from \"react-router-dom\";\n\nclass Card extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      amountToBuy: 0,\n      isDelivery: false,\n    };\n\n    this.handleCheckboxChange=this.handleCheckboxChange.bind(this);\n  }\n\n  handleCheckboxChange(event) {\n    const checked = event.target.checked;\n    this.setState({\n      [event.target.name]: checked\n    });\n    this.props.updateItemInCart(this.props.id, checked);\n  }\n\n  render () {\n    return (\n      <div className=\"itemColumns\">\n        <div className=\"itemValues\" align=\"center\">\n          <p>Seller: {this.props.seller}</p>\n          <p>Name: {this.props.name}</p>\n          <p>Pickup: {this.props.pickup}</p>\n          <p>Delivery: ${this.props.delivery}</p>\n          <br />\n          <p>Amount to buy: {this.props.amountToBuy}</p>\n          <p>Total price: ${this.props.totalPriceForItem}</p>\n\n          <button className=\"itemButton\" onClick={() => {\n            this.props.removeFromCart(this.props.id);\n          }}>Remove from Cart</button>\n          <input type=\"checkbox\" id=\"delivery\" name=\"isDelivery\" checked={this.state.isDelivery} onChange={this.handleCheckboxChange} />\n          <label htmlFor=\"delivery\"> Delivery?</label>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default class Checkout extends React.Component {\n  constructor(props) {\n    super(props);\n\n    var user;\n    if (this.props.location.state === undefined) {\n      user = \"\";\n    } else {\n      user = this.props.location.state.user;\n    }\n\n    let newItems = this.props.location.state.cart;\n    let totalPrice = 0;\n    for (let i = 0; i < newItems.length; i++) {\n      newItems[i].totalPriceForItem = +newItems[i].price * +newItems[i].amountToBuy;\n      totalPrice += newItems[i].totalPriceForItem;\n\n      newItems[i].totalPriceForItem = Math.round(newItems[i].totalPriceForItem * 100) / 100;\n      totalPrice = Math.round(totalPrice * 100) / 100;\n    }\n\n    this.state = {\n      user: user,\n      items: newItems,\n      total: totalPrice,\n    };\n\n    this.onShop=this.onShop.bind(this);\n    this.clearCart=this.clearCart.bind(this);\n    this.calculateTotal=this.calculateTotal.bind(this);\n    this.updateItemInCart=this.updateItemInCart.bind(this);\n    this.removeFromCart=this.removeFromCart.bind(this);\n    this.purchase=this.purchase.bind(this);\n  }\n\n  calculateTotal() {\n    let newTotal = 0;\n    for (let i = 0; i < this.state.items.length; i++) {\n      newTotal += this.state.items[i].totalPriceForItem;\n    }\n    newTotal = Math.round(newTotal * 100) / 100;\n    this.setState({ total: newTotal });\n  }\n\n  onShop() {\n    this.setState({ shop: true });\n  }\n\n  clearCart() {\n    this.setState({ items: [] });\n    this.setState({ total: 0 });\n  }\n\n  updateItemInCart(idx, isDelivery) {\n    let newItems = this.state.items;\n    newItems[idx].totalPriceForItem = +newItems[idx].price * +newItems[idx].amountToBuy;\n    if (isDelivery) {\n      newItems[idx].totalPriceForItem = +newItems[idx].totalPriceForItem + +newItems[idx].delivery;\n    }\n    newItems[idx].totalPriceForItem = Math.round(newItems[idx].totalPriceForItem * 100) / 100;\n    this.setState( {items: newItems });\n    this.calculateTotal();\n  }\n\n  removeFromCart(idx) {\n    let newItems = this.state.items;\n    newItems.splice(idx, 1);\n    this.setState( {items: newItems });\n    this.calculateTotal();\n  }\n\n  async deleteFood(seller, name) {\n    await fetch(`http://localhost:8080/foodItem/${seller}/${name}`, {\n      method: 'DELETE',\n    }).then(response => {\n      // Do nothing\n    })\n    .catch(err => {\n      throw new Error(err)\n    })\n  }\n\n  async putFood(newItem) {\n    await fetch('http://localhost:8080/foodItem', {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(newItem)\n    }).then(response => {\n      // Do nothing\n    })\n    .catch(err => {\n      throw new Error(err)\n    })\n  }\n\n  async purchase() {\n    if(this.state.items.length <= 0) {\n      return;\n    }\n    for (let i = 0; i < this.state.items.length; i++) {\n      let newItem = {seller: this.state.items[i].seller, name: this.state.items[i].name,\n                    price: this.state.items[i].price, amount: this.state.items[i].amount,\n                    pickup: this.state.items[i].pickup, delivery: this.state.items[i].delivery};\n      if (newItem.amount <= 0) {\n        await this.deleteFood(newItem.seller, newItem.name);\n      } else {\n        await this.putFood(newItem);\n      }\n    }\n    this.setState({ items: [] });\n    this.setState({ total: 0 });\n    alert(\"Thank you for your purchase!\");\n  }\n\n  renderCards() {\n    var cards = [];\n    for (let i = 0; i < this.state.items.length; i++) {\n      cards.push(<Card\n              key={i}\n              id={i}\n              seller={this.state.items[i].seller}\n              name={this.state.items[i].name}\n              totalPriceForItem={this.state.items[i].totalPriceForItem}\n              amountToBuy={this.state.items[i].amountToBuy}\n              pickup={this.state.items[i].pickup}\n              delivery={this.state.items[i].delivery}\n              updateItemInCart={this.updateItemInCart}\n              removeFromCart={this.removeFromCart}\n            />);\n    }\n    return cards;\n  }\n\n  render() {\n\n    if (this.state.user === \"\") {\n        return(\n          <Redirect to=\"/\" />\n        );\n    }\n\n    if (this.state.shop) {\n      return (\n        <Redirect to={{ pathname: '/Shop', state: { user: this.state.user, cart: this.state.items} }} />\n      );\n    }\n\n    return (\n      <React.Fragment>\n        <section className=\"content-container\">\n          \n          <h1 className=\"pageheader\">Checkout for: {this.state.user}</h1>\n          <h2 className=\"pageheader\">Total: ${this.state.total}</h2>\n          <button className=\"selectButton\" onClick={this.purchase}>\n            Purchase\n          </button>\n          <button className=\"selectButton\" onClick={this.onShop}>\n            Return to shopping\n          </button>\n          <button className=\"selectButton\" onClick={this.clearCart}>\n            Clear Cart\n          </button>\n          <br />\n          <br />\n\n          {this.renderCards()}\n\n          <br />\n          \n        </section>\n      </React.Fragment>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}