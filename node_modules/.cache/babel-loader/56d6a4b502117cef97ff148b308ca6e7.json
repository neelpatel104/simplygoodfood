{"ast":null,"code":"var _jsxFileName = \"/Users/neelpatel/Desktop/Classes/342/Project/frontend-react/src/components/pages/OrderHistory.js\";\nimport React from 'react';\nimport { Redirect } from \"react-router-dom\";\nimport '@fortawesome/fontawesome-free/css/all.min.css';\nimport 'bootstrap-css-only/css/bootstrap.min.css';\nimport './FoodItems.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class OrderHistory extends React.Component {\n  constructor(props) {\n    super(props);\n    var user;\n    var pastOrders = [];\n\n    if (this.props.location.state === undefined) {\n      user = \"\";\n    } else {\n      user = this.props.location.state.user;\n      pastOrders = this.props.location.state.pastOrders;\n    }\n\n    let token = document.cookie.split('; ').find(row => row.startsWith('token'));\n    token = token.split('=')[1];\n    this.state = {\n      user: user,\n      id: 0,\n      //All food items in the system\n      items: [],\n      //Orders of the buyer\n      orders: pastOrders,\n      message: \"\",\n      token: token,\n      logout: false,\n      shop: false\n    };\n    this.renderOrders = this.renderOrders.bind(this);\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.logOut = this.logOut.bind(this);\n    this.onShop = this.onShop.bind(this);\n  }\n\n  componentDidMount() {\n    //remove after demo\n    if (this.state.orders.length <= 0) {\n      this.setState({\n        message: \"No orders to show\"\n      });\n    }\n\n    this.getFoodItems(); //this.getOrders();\n  }\n\n  async getFoodItems() {\n    await fetch('http://localhost:8080/foodItems', {\n      method: 'GET',\n      credentials: 'include',\n      headers: {\n        'authorization': `Bearer ${this.state.token}`\n      }\n    }).then(response => response.json()).then(responseJSON => {\n      let newItems = responseJSON;\n      this.setState({\n        items: newItems\n      });\n    }).catch(err => {// this.setState({ user: \"\" });\n      // Do nothing, will be redirected back to home page\n      // throw new Error(err)\n    });\n  }\n  /**\n   * Fetch the orders of the user and load them into state.orders\n   */\n\n\n  async getOrders() {\n    await fetch(`http://localhost:8080/orders`, {\n      method: 'GET',\n      credentials: 'include',\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      }\n    }).then(response => response.json()).then(responseJSON => {\n      if (responseJSON.length <= 0) {\n        this.setState({\n          message: \"No orders to show\"\n        });\n      }\n\n      this.setState({\n        orders: responseJSON\n      });\n    }).catch(err => {\n      // Do nothing, will be redirected to home page\n      throw new Error(err);\n    });\n  }\n\n  handleTextChange(event) {\n    const value = event.target.value;\n    this.setState({\n      [event.target.name]: value\n    });\n  }\n\n  logOut() {\n    document.cookie = \"token=\";\n    this.setState({\n      user: \"\"\n    });\n  }\n\n  onShop() {\n    this.setState({\n      shop: true\n    });\n  }\n\n  renderOrders() {\n    if (this.state.orders.length <= 0) {\n      return /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: this.state.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this);\n    }\n\n    console.log(this.state.orders);\n    var orders = [];\n\n    for (let i = this.state.orders.length - 1; i >= 0; i--) {\n      orders.push( /*#__PURE__*/_jsxDEV(Order, {\n        date: this.state.orders[i].time,\n        total: this.state.orders[i].total.toFixed(2),\n        seller: this.state.orders[i].seller,\n        type: this.state.orders[i].type\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 19\n      }, this));\n      let orderDetails = \"\";\n\n      for (let j = 0; j < this.state.orders[i].foodItems.length; j++) {\n        orderDetails = this.state.orders[i].foodItems[j].amountToBuy + \" \" + this.state.orders[i].foodItems[j].name + \", $\" + this.state.orders[i].foodItems[j].totalPriceForItem.toFixed(2);\n        orders.push( /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: orderDetails\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }, this));\n      }\n\n      orders.push( /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 19\n      }, this));\n      orders.push( /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 19\n      }, this));\n    }\n\n    return orders;\n  }\n\n  render() {\n    // If no user is logged in\n    if (this.state.user === \"\") {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 11\n      }, this);\n    }\n\n    if (this.state.shop) {\n      return (\n        /*#__PURE__*/\n        //Redirect to orderHistory.js with the user and their cart\n        _jsxDEV(Redirect, {\n          to: {\n            pathname: '/Shop',\n            state: {\n              user: this.state.user,\n              cart: this.props.location.state.cart,\n              pastOrders: this.props.location.state.pastOrders\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 9\n        }, this)\n      );\n    }\n\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"content-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"pageheader\",\n          children: \"Order History\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rows\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              float: 'right'\n            },\n            className: \"selectButton\",\n            onClick: this.logOut,\n            children: \"Log Out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              float: 'right'\n            },\n            className: \"selectButton\",\n            onClick: this.onShop,\n            children: \"Shop\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this), this.renderOrders(), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass Order extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Date: \", this.props.date]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Total: $\", this.props.total, \", Seller: \", this.props.seller, \", Type: \", this.props.type]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/neelpatel/Desktop/Classes/342/Project/frontend-react/src/components/pages/OrderHistory.js"],"names":["React","Redirect","OrderHistory","Component","constructor","props","user","pastOrders","location","state","undefined","token","document","cookie","split","find","row","startsWith","id","items","orders","message","logout","shop","renderOrders","bind","handleTextChange","logOut","onShop","componentDidMount","length","setState","getFoodItems","fetch","method","credentials","headers","then","response","json","responseJSON","newItems","catch","err","getOrders","Error","event","value","target","name","console","log","i","push","time","total","toFixed","seller","type","orderDetails","j","foodItems","amountToBuy","totalPriceForItem","render","pathname","cart","float","Order","date"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AAEA,OAAO,+CAAP;AACA,OAAO,0CAAP;AACA,OAAO,iBAAP;;AAEA,eAAe,MAAMC,YAAN,SAA2BF,KAAK,CAACG,SAAjC,CAA2C;AACxDC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AAEA,QAAIC,IAAJ;AACA,QAAIC,UAAU,GAAG,EAAjB;;AACA,QAAI,KAAKF,KAAL,CAAWG,QAAX,CAAoBC,KAApB,KAA8BC,SAAlC,EAA6C;AAC3CJ,MAAAA,IAAI,GAAG,EAAP;AACD,KAFD,MAEO;AACLA,MAAAA,IAAI,GAAG,KAAKD,KAAL,CAAWG,QAAX,CAAoBC,KAApB,CAA0BH,IAAjC;AACAC,MAAAA,UAAU,GAAG,KAAKF,KAAL,CAAWG,QAAX,CAAoBC,KAApB,CAA0BF,UAAvC;AACD;;AAED,QAAII,KAAK,GAAGC,QAAQ,CAACC,MAAT,CAAgBC,KAAhB,CAAsB,IAAtB,EAA4BC,IAA5B,CAAiCC,GAAG,IAAIA,GAAG,CAACC,UAAJ,CAAe,OAAf,CAAxC,CAAZ;AACAN,IAAAA,KAAK,GAAGA,KAAK,CAACG,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAR;AAEA,SAAKL,KAAL,GAAa;AACXH,MAAAA,IAAI,EAAEA,IADK;AAEXY,MAAAA,EAAE,EAAE,CAFO;AAGX;AACAC,MAAAA,KAAK,EAAE,EAJI;AAKX;AACAC,MAAAA,MAAM,EAAEb,UANG;AAOXc,MAAAA,OAAO,EAAE,EAPE;AAQXV,MAAAA,KAAK,EAAEA,KARI;AASXW,MAAAA,MAAM,EAAE,KATG;AAUXC,MAAAA,IAAI,EAAE;AAVK,KAAb;AAYA,SAAKC,YAAL,GAAkB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAAlB;AACA,SAAKC,gBAAL,GAAsB,KAAKA,gBAAL,CAAsBD,IAAtB,CAA2B,IAA3B,CAAtB;AACA,SAAKE,MAAL,GAAY,KAAKA,MAAL,CAAYF,IAAZ,CAAiB,IAAjB,CAAZ;AACA,SAAKG,MAAL,GAAY,KAAKA,MAAL,CAAYH,IAAZ,CAAiB,IAAjB,CAAZ;AACD;;AAEDI,EAAAA,iBAAiB,GAAG;AAClB;AACA,QAAI,KAAKpB,KAAL,CAAWW,MAAX,CAAkBU,MAAlB,IAA4B,CAAhC,EAAmC;AACjC,WAAKC,QAAL,CAAc;AAAEV,QAAAA,OAAO,EAAE;AAAX,OAAd;AACD;;AAGD,SAAKW,YAAL,GAPkB,CAQlB;AACD;;AAEiB,QAAZA,YAAY,GAAE;AAClB,UAAMC,KAAK,CAAC,iCAAD,EAAoC;AAC7CC,MAAAA,MAAM,EAAE,KADqC;AAE7CC,MAAAA,WAAW,EAAE,SAFgC;AAG7CC,MAAAA,OAAO,EAAE;AACP,yBAAkB,UAAS,KAAK3B,KAAL,CAAWE,KAAM;AADrC;AAHoC,KAApC,CAAL,CAOL0B,IAPK,CAOAC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAPZ,EAQLF,IARK,CAQAG,YAAY,IAAI;AACpB,UAAIC,QAAQ,GAAGD,YAAf;AAEA,WAAKT,QAAL,CAAc;AAACZ,QAAAA,KAAK,EAAEsB;AAAR,OAAd;AACD,KAZK,EAaLC,KAbK,CAaCC,GAAG,IAAI,CACZ;AACA;AACA;AACD,KAjBK,CAAN;AAkBD;AAED;AACF;AACA;;;AACkB,QAATC,SAAS,GAAG;AACjB,UAAMX,KAAK,CAAE,8BAAF,EAAiC;AAC1CC,MAAAA,MAAM,EAAE,KADkC;AAE1CC,MAAAA,WAAW,EAAE,SAF6B;AAG1CC,MAAAA,OAAO,EAAE;AACP,yBAAkB,UAAS,KAAK3B,KAAL,CAAWE,KAAM;AADrC;AAHiC,KAAjC,CAAL,CAOL0B,IAPK,CAOAC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAPZ,EAQLF,IARK,CAQAG,YAAY,IAAI;AACpB,UAAIA,YAAY,CAACV,MAAb,IAAuB,CAA3B,EAA8B;AAC5B,aAAKC,QAAL,CAAc;AAAEV,UAAAA,OAAO,EAAE;AAAX,SAAd;AACD;;AAED,WAAKU,QAAL,CAAc;AAAEX,QAAAA,MAAM,EAAEoB;AAAV,OAAd;AACD,KAdK,EAeLE,KAfK,CAeCC,GAAG,IAAI;AACZ;AACA,YAAM,IAAIE,KAAJ,CAAUF,GAAV,CAAN;AACD,KAlBK,CAAN;AAmBD;;AAEDjB,EAAAA,gBAAgB,CAACoB,KAAD,EAAQ;AACtB,UAAMC,KAAK,GAAGD,KAAK,CAACE,MAAN,CAAaD,KAA3B;AACA,SAAKhB,QAAL,CAAc;AACZ,OAACe,KAAK,CAACE,MAAN,CAAaC,IAAd,GAAqBF;AADT,KAAd;AAGD;;AAEDpB,EAAAA,MAAM,GAAE;AACNf,IAAAA,QAAQ,CAACC,MAAT,GAAkB,QAAlB;AACA,SAAKkB,QAAL,CAAc;AAACzB,MAAAA,IAAI,EAAE;AAAP,KAAd;AACD;;AAEDsB,EAAAA,MAAM,GAAG;AACP,SAAKG,QAAL,CAAc;AAAER,MAAAA,IAAI,EAAE;AAAR,KAAd;AACD;;AAEDC,EAAAA,YAAY,GAAG;AACb,QAAI,KAAKf,KAAL,CAAWW,MAAX,CAAkBU,MAAlB,IAA4B,CAAhC,EAAmC;AACjC,0BACE;AAAA,kBAAK,KAAKrB,KAAL,CAAWY;AAAhB;AAAA;AAAA;AAAA;AAAA,cADF;AAGD;;AACD6B,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAK1C,KAAL,CAAWW,MAAvB;AACA,QAAIA,MAAM,GAAG,EAAb;;AACA,SAAK,IAAIgC,CAAC,GAAG,KAAK3C,KAAL,CAAWW,MAAX,CAAkBU,MAAlB,GAA2B,CAAxC,EAA2CsB,CAAC,IAAI,CAAhD,EAAmDA,CAAC,EAApD,EAAwD;AAEtDhC,MAAAA,MAAM,CAACiC,IAAP,eAAY,QAAC,KAAD;AACE,QAAA,IAAI,EAAE,KAAK5C,KAAL,CAAWW,MAAX,CAAkBgC,CAAlB,EAAqBE,IAD7B;AAEE,QAAA,KAAK,EAAE,KAAK7C,KAAL,CAAWW,MAAX,CAAkBgC,CAAlB,EAAqBG,KAArB,CAA2BC,OAA3B,CAAmC,CAAnC,CAFT;AAGE,QAAA,MAAM,EAAE,KAAK/C,KAAL,CAAWW,MAAX,CAAkBgC,CAAlB,EAAqBK,MAH/B;AAIE,QAAA,IAAI,EAAE,KAAKhD,KAAL,CAAWW,MAAX,CAAkBgC,CAAlB,EAAqBM;AAJ7B,SAAYN,CAAZ;AAAA;AAAA;AAAA;AAAA,cAAZ;AAOA,UAAIO,YAAY,GAAG,EAAnB;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKnD,KAAL,CAAWW,MAAX,CAAkBgC,CAAlB,EAAqBS,SAArB,CAA+B/B,MAAnD,EAA2D8B,CAAC,EAA5D,EAAgE;AAC9DD,QAAAA,YAAY,GAAG,KAAKlD,KAAL,CAAWW,MAAX,CAAkBgC,CAAlB,EAAqBS,SAArB,CAA+BD,CAA/B,EAAkCE,WAAlC,GAAgD,GAAhD,GAAsD,KAAKrD,KAAL,CAAWW,MAAX,CAAkBgC,CAAlB,EAAqBS,SAArB,CAA+BD,CAA/B,EAAkCX,IAAxF,GAA+F,KAA/F,GAAuG,KAAKxC,KAAL,CAAWW,MAAX,CAAkBgC,CAAlB,EAAqBS,SAArB,CAA+BD,CAA/B,EAAkCG,iBAAlC,CAAoDP,OAApD,CAA4D,CAA5D,CAAtH;AAEApC,QAAAA,MAAM,CAACiC,IAAP,eAAY;AAAA,oBAAKM;AAAL;AAAA;AAAA;AAAA;AAAA,gBAAZ;AACD;;AACDvC,MAAAA,MAAM,CAACiC,IAAP,eAAY;AAAA;AAAA;AAAA;AAAA,cAAZ;AACAjC,MAAAA,MAAM,CAACiC,IAAP,eAAY;AAAA;AAAA;AAAA;AAAA,cAAZ;AACD;;AACD,WAAOjC,MAAP;AACD;;AAED4C,EAAAA,MAAM,GAAG;AACP;AACA,QAAI,KAAKvD,KAAL,CAAWH,IAAX,KAAoB,EAAxB,EAA4B;AACxB,0BACE,QAAC,QAAD;AAAU,QAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,cADF;AAGH;;AAED,QAAI,KAAKG,KAAL,CAAWc,IAAf,EAAqB;AACnB;AAAA;AACE;AACA,gBAAC,QAAD;AAAU,UAAA,EAAE,EAAE;AAAE0C,YAAAA,QAAQ,EAAE,OAAZ;AAAqBxD,YAAAA,KAAK,EAAE;AAAEH,cAAAA,IAAI,EAAE,KAAKG,KAAL,CAAWH,IAAnB;AAAyB4D,cAAAA,IAAI,EAAE,KAAK7D,KAAL,CAAWG,QAAX,CAAoBC,KAApB,CAA0ByD,IAAzD;AAA+D3D,cAAAA,UAAU,EAAE,KAAKF,KAAL,CAAWG,QAAX,CAAoBC,KAApB,CAA0BF;AAArG;AAA5B;AAAd;AAAA;AAAA;AAAA;AAAA;AAFF;AAID;;AAED,wBACE,QAAC,KAAD,CAAO,QAAP;AAAA,6BACE;AAAS,QAAA,SAAS,EAAC,mBAAnB;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAK,UAAA,SAAS,EAAC,MAAf;AAAA,kCACE;AAAQ,YAAA,KAAK,EAAE;AAAE4D,cAAAA,KAAK,EAAE;AAAT,aAAf;AAAkC,YAAA,SAAS,EAAC,cAA5C;AAA2D,YAAA,OAAO,EAAE,KAAKxC,MAAzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAIE;AAAQ,YAAA,KAAK,EAAE;AAAEwC,cAAAA,KAAK,EAAE;AAAT,aAAf;AAAkC,YAAA,SAAS,EAAC,cAA5C;AAA2D,YAAA,OAAO,EAAE,KAAKvC,MAAzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,eAUE;AAAA;AAAA;AAAA;AAAA,gBAVF,eAWE;AAAA;AAAA;AAAA;AAAA,gBAXF,eAYE;AAAA;AAAA;AAAA;AAAA,gBAZF,eAaE;AAAA;AAAA;AAAA;AAAA,gBAbF,EAcG,KAAKJ,YAAL,EAdH,eAgBE;AAAA;AAAA;AAAA;AAAA,gBAhBF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF;AAuBD;;AA9KuD;;AAiL1D,MAAM4C,KAAN,SAAoBpE,KAAK,CAACG,SAA1B,CAAoC;AAClC6D,EAAAA,MAAM,GAAI;AACR,wBACE;AAAA,8BACE;AAAA,6BAAW,KAAK3D,KAAL,CAAWgE,IAAtB;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAA,+BAAa,KAAKhE,KAAL,CAAWkD,KAAxB,gBAAyC,KAAKlD,KAAL,CAAWoD,MAApD,cAAoE,KAAKpD,KAAL,CAAWqD,IAA/E;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAMD;;AARiC","sourcesContent":["import React from 'react';\nimport { Redirect } from \"react-router-dom\";\n\nimport '@fortawesome/fontawesome-free/css/all.min.css'; \nimport 'bootstrap-css-only/css/bootstrap.min.css'; \nimport './FoodItems.css'\n\nexport default class OrderHistory extends React.Component {\n  constructor(props) {\n    super(props);\n\n    var user;\n    var pastOrders = [];\n    if (this.props.location.state === undefined) {\n      user = \"\";\n    } else {\n      user = this.props.location.state.user;\n      pastOrders = this.props.location.state.pastOrders;\n    }\n    \n    let token = document.cookie.split('; ').find(row => row.startsWith('token'));\n    token = token.split('=')[1];\n\n    this.state = {\n      user: user,\n      id: 0,\n      //All food items in the system\n      items: [],\n      //Orders of the buyer\n      orders: pastOrders,\n      message: \"\",\n      token: token,\n      logout: false,\n      shop: false,\n    };\n    this.renderOrders=this.renderOrders.bind(this);\n    this.handleTextChange=this.handleTextChange.bind(this);\n    this.logOut=this.logOut.bind(this);\n    this.onShop=this.onShop.bind(this);\n  }\n\n  componentDidMount() {\n    //remove after demo\n    if (this.state.orders.length <= 0) {\n      this.setState({ message: \"No orders to show\" });\n    }\n\n\n    this.getFoodItems();\n    //this.getOrders();\n  }\n\n  async getFoodItems(){\n    await fetch('http://localhost:8080/foodItems', {\n      method: 'GET',\n      credentials: 'include',\n      headers: {\n        'authorization': `Bearer ${this.state.token}`,\n      },\n    })\n    .then(response => response.json())\n    .then(responseJSON => {\n      let newItems = responseJSON;\n      \n      this.setState({items: newItems});\n    })\n    .catch(err => {\n      // this.setState({ user: \"\" });\n      // Do nothing, will be redirected back to home page\n      // throw new Error(err)\n    })\n  }\n\n  /**\n   * Fetch the orders of the user and load them into state.orders\n   */\n   async getOrders() {\n    await fetch(`http://localhost:8080/orders`, {\n      method: 'GET',\n      credentials: 'include',\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`,\n      }\n    })\n    .then(response => response.json())\n    .then(responseJSON => {\n      if (responseJSON.length <= 0) {\n        this.setState({ message: \"No orders to show\" });\n      }\n\n      this.setState({ orders: responseJSON });\n    })\n    .catch(err => {\n      // Do nothing, will be redirected to home page\n      throw new Error(err);\n    })\n  }\n\n  handleTextChange(event) {\n    const value = event.target.value;\n    this.setState({\n      [event.target.name]: value\n    });\n  }\n\n  logOut(){\n    document.cookie = \"token=\";\n    this.setState({user: \"\"});\n  }\n\n  onShop() {\n    this.setState({ shop: true });\n  }\n\n  renderOrders() {\n    if (this.state.orders.length <= 0) {\n      return (\n        <h2>{this.state.message}</h2>\n      );\n    }\n    console.log(this.state.orders);\n    var orders = [];\n    for (let i = this.state.orders.length - 1; i >= 0; i--) {\n      \n      orders.push(<Order key={i}\n                    date={this.state.orders[i].time}\n                    total={this.state.orders[i].total.toFixed(2)}\n                    seller={this.state.orders[i].seller}\n                    type={this.state.orders[i].type}\n                  />);\n\n      let orderDetails = \"\";\n      for (let j = 0; j < this.state.orders[i].foodItems.length; j++) {\n        orderDetails = this.state.orders[i].foodItems[j].amountToBuy + \" \" + this.state.orders[i].foodItems[j].name + \", $\" + this.state.orders[i].foodItems[j].totalPriceForItem.toFixed(2);\n        \n        orders.push(<h4>{orderDetails}</h4>);\n      }\n      orders.push(<br/>);\n      orders.push(<br/>);\n    }\n    return orders;\n  }\n\n  render() {\n    // If no user is logged in\n    if (this.state.user === \"\") {\n        return(\n          <Redirect to=\"/\" />\n        );\n    }\n\n    if (this.state.shop) {\n      return (\n        //Redirect to orderHistory.js with the user and their cart\n        <Redirect to={{ pathname: '/Shop', state: { user: this.state.user, cart: this.props.location.state.cart, pastOrders: this.props.location.state.pastOrders } }} />\n      );\n    }\n\n    return (\n      <React.Fragment>\n        <section className=\"content-container\">\n          <h1 className=\"pageheader\">Order History</h1>\n          <div className=\"rows\">\n            <button style={{ float: 'right'}} className=\"selectButton\" onClick={this.logOut}>\n            Log Out\n            </button>\n            <button style={{ float: 'right'}} className=\"selectButton\" onClick={this.onShop}>\n            Shop\n            </button>\n          </div>\n          <br />\n          <br />\n          <br />\n          <br />\n          {this.renderOrders()}\n          \n          <br />\n\n        </section>\n      </React.Fragment>\n    );\n  }\n}\n\nclass Order extends React.Component {\n  render () {\n    return (\n      <div>\n        <h2>Date: {this.props.date}</h2>\n        <h3>Total: ${this.props.total}, Seller: {this.props.seller}, Type: {this.props.type}</h3>\n      </div>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}