{"ast":null,"code":"var _jsxFileName = \"/Users/neelpatel/Desktop/Classes/342/Project/frontend-react/src/shop.js\";\nimport React from 'react';\nimport { Redirect } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Card extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      amountToBuy: 0,\n      isDelivery: false\n    };\n    this.handleTextChange = this.handleTextChange.bind(this);\n  }\n\n  handleTextChange(event) {\n    const value = event.target.value;\n    this.setState({\n      [event.target.name]: value\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"item\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"itemContent\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Seller: \", this.props.seller]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Name: \", this.props.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Price: $\", this.props.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Amount: \", this.props.amount]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Pickup: \", this.props.pickup]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Delivery: $\", this.props.delivery]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"itemControls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"itemButton\",\n          onClick: () => {\n            this.props.addToCart(this.props.id, this.state.amountToBuy, this.state.isDelivery);\n            this.setState({\n              amountToBuy: 0\n            });\n          },\n          children: \"Add to Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 11\n        }, this), \"Amount: \", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          className: \"amountInput\",\n          name: \"amountToBuy\",\n          min: \"0\",\n          max: this.props.amount,\n          value: this.state.amountToBuy,\n          onChange: this.handleTextChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default class Shop extends React.Component {\n  constructor(props) {\n    super(props);\n    var user;\n\n    if (this.props.location.state === undefined) {\n      user = \"\";\n    } else {\n      user = this.props.location.state.user;\n    }\n\n    this.state = {\n      checkout: false,\n      user: user,\n      id: 0,\n      items: [],\n      cart: [],\n      displayItem: 0,\n      newSeller: \"\",\n      newName: \"\",\n      newPrice: \"\",\n      newAmount: \"\",\n      newPickup: \"\",\n      newDelivery: \"\"\n    };\n    this.addFood = this.addFood.bind(this);\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.addToCart = this.addToCart.bind(this);\n    this.addTestingValues = this.addTestingValues.bind(this);\n    this.onCheckout = this.onCheckout.bind(this);\n    this.getFoodItems();\n  }\n\n  async getFoodItems() {\n    await fetch('http://localhost:8080/foodItems', {\n      method: 'GET'\n    }).then(response => response.json()).then(responseJSON => {\n      let newItems = responseJSON;\n\n      for (let i = 0; i < newItems.length; i++) {\n        newItems[i].amountToBuy = 0;\n\n        for (let j = 0; j < this.props.location.state.cart.length; j++) {\n          if (newItems[i].seller === this.props.location.state.cart[j].seller && newItems[i].name === this.props.location.state.cart[j].name) {\n            newItems[i].amountToBuy = this.props.location.state.cart[j].amountToBuy;\n            newItems[i].amount = +newItems[i].amount - +newItems[i].amountToBuy;\n          }\n        }\n      }\n\n      this.setState({\n        items: newItems\n      });\n    }).catch(err => {\n      throw new Error(err);\n    });\n  }\n\n  async postFood(newItem) {\n    await fetch('http://localhost:8080/foodItem', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(newItem)\n    }).then(() => this.getFoodItems()).catch(err => {\n      throw new Error(err);\n    });\n  }\n\n  async deleteFood(seller, name) {\n    await fetch(`http://localhost:8080/foodItem/${seller}/${name}`, {\n      method: 'DELETE'\n    }).then(() => this.getFoodItems()).catch(err => {\n      throw new Error(err);\n    });\n  }\n\n  addFood(event) {\n    event.preventDefault();\n    let newItem = {\n      seller: this.state.newSeller,\n      name: this.state.newName,\n      price: this.state.newPrice,\n      amount: this.state.newAmount,\n      pickup: this.state.newPickup,\n      delivery: this.state.newDelivery\n    };\n    this.postFood(newItem); //Reset input boxes\n\n    this.setState({\n      newSeller: \"\"\n    });\n    this.setState({\n      newName: \"\"\n    });\n    this.setState({\n      newPrice: \"\"\n    });\n    this.setState({\n      newAmount: \"\"\n    });\n    this.setState({\n      newPickup: \"\"\n    });\n    this.setState({\n      newDelivery: \"\"\n    });\n  }\n\n  handleTextChange(event) {\n    const value = event.target.value;\n    this.setState({\n      [event.target.name]: value\n    });\n  }\n\n  discard(seller, name) {\n    this.deleteFood(seller, name);\n  }\n\n  addToCart(idx, amountToBuy, isDelivery) {\n    if (amountToBuy > 0) {\n      let newItems = this.state.items;\n      newItems[idx].amountToBuy = +newItems[idx].amountToBuy + +amountToBuy;\n      newItems[idx].amount = +newItems[idx].amount - +amountToBuy;\n      newItems[idx].isDelivery = isDelivery;\n      this.setState({\n        items: newItems\n      });\n    }\n  }\n\n  addTestingValues() {\n    let newFood = {\n      seller: \"Inc\",\n      name: \"Tomatoes\",\n      price: 1.23,\n      amount: 15,\n      pickup: \"112 Foods Inc Dr\",\n      delivery: 5.99\n    };\n    this.postFood(newFood);\n    newFood = {\n      seller: \"Inc\",\n      name: \"Cabbages\",\n      price: 0.78,\n      amount: 9,\n      pickup: \"112 Foods Inc Dr\",\n      delivery: 5.99\n    };\n    this.postFood(newFood);\n    newFood = {\n      seller: \"Ultimate\",\n      name: \"Pasta\",\n      price: 3.45,\n      amount: 2,\n      pickup: \"Ultimate Avenue\",\n      delivery: \"Free\"\n    };\n    this.postFood(newFood);\n    newFood = {\n      seller: \"Food Lion\",\n      name: \"Mushrooms\",\n      price: 2,\n      amount: 10,\n      pickup: \"Avent Ferry Dr\",\n      delivery: \"2.99\"\n    };\n    this.postFood(newFood);\n    newFood = {\n      seller: \"Lowes' Foods\",\n      name: \"Bananas\",\n      price: 1.50,\n      amount: 50,\n      pickup: \"NC State Campus Dr\",\n      delivery: \"5.99\"\n    };\n    this.postFood(newFood);\n  }\n\n  onCheckout() {\n    let newCart = [];\n\n    for (let i = 0; i < this.state.items.length; i++) {\n      if (this.state.items[i].amountToBuy > 0) {\n        newCart.push(this.state.items[i]);\n      }\n    }\n\n    this.setState({\n      cart: newCart\n    });\n    this.setState({\n      checkout: true\n    });\n  }\n\n  renderCards() {\n    if (this.state.items.length <= 0) {\n      return /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"No items in the store, sorry!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this);\n    }\n\n    var cards = [];\n\n    for (let i = 0; i < this.state.items.length; i++) {\n      cards.push( /*#__PURE__*/_jsxDEV(Card, {\n        id: i,\n        seller: this.state.items[i].seller,\n        name: this.state.items[i].name,\n        price: this.state.items[i].price,\n        amount: this.state.items[i].amount,\n        pickup: this.state.items[i].pickup,\n        delivery: this.state.items[i].delivery,\n        addToCart: this.addToCart\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 18\n      }, this));\n    }\n\n    return cards;\n  }\n\n  render() {\n    if (this.state.user === \"\") {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }, this);\n    }\n\n    if (this.state.checkout) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: {\n          pathname: '/checkout',\n          state: {\n            user: this.state.user,\n            cart: this.state.cart\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [this.renderCards(), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"checkoutButton\",\n        onClick: this.onCheckout,\n        children: \"View Cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"addTestingValues\",\n        onClick: this.addTestingValues,\n        children: \"Populate with testing items\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/neelpatel/Desktop/Classes/342/Project/frontend-react/src/shop.js"],"names":["React","Redirect","Card","Component","constructor","props","state","amountToBuy","isDelivery","handleTextChange","bind","event","value","target","setState","name","render","seller","price","amount","pickup","delivery","addToCart","id","Shop","user","location","undefined","checkout","items","cart","displayItem","newSeller","newName","newPrice","newAmount","newPickup","newDelivery","addFood","addTestingValues","onCheckout","getFoodItems","fetch","method","then","response","json","responseJSON","newItems","i","length","j","catch","err","Error","postFood","newItem","headers","body","JSON","stringify","deleteFood","preventDefault","discard","idx","newFood","newCart","push","renderCards","cards","pathname"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Redirect } from \"react-router-dom\";\n\nclass Card extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      amountToBuy: 0,\n      isDelivery: false,\n    };\n    this.handleTextChange=this.handleTextChange.bind(this);\n  }\n\n  handleTextChange(event) {\n    const value = event.target.value;\n    this.setState({\n      [event.target.name]: value\n    });\n  }\n\n  render () {\n    return (\n      <div className=\"item\">\n        <div className=\"itemContent\">\n          <p>Seller: {this.props.seller}</p>\n          <p>Name: {this.props.name}</p>\n          <p>Price: ${this.props.price}</p>\n          <p>Amount: {this.props.amount}</p>\n          <p>Pickup: {this.props.pickup}</p>\n          <p>Delivery: ${this.props.delivery}</p>\n        </div>\n        <div className=\"itemControls\">\n          <button className=\"itemButton\" onClick={() => {\n            this.props.addToCart(this.props.id, this.state.amountToBuy, this.state.isDelivery);\n            this.setState({ amountToBuy: 0 });\n          }}>Add to Cart</button>\n          Amount: <input type=\"number\" className=\"amountInput\" name=\"amountToBuy\" min='0' max={this.props.amount} value={this.state.amountToBuy} onChange={this.handleTextChange}></input>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default class Shop extends React.Component {\n  constructor(props) {\n    super(props);\n\n    var user;\n    if (this.props.location.state === undefined) {\n      user = \"\";\n    } else {\n      user = this.props.location.state.user;\n    }\n\n    this.state = {\n      checkout: false,\n      user: user,\n      id: 0,\n      items: [],\n      cart: [],\n      displayItem: 0,\n      newSeller: \"\",\n      newName: \"\",\n      newPrice: \"\",\n      newAmount: \"\",\n      newPickup: \"\",\n      newDelivery: \"\",\n    };\n    this.addFood=this.addFood.bind(this);\n    this.handleTextChange=this.handleTextChange.bind(this);\n    this.addToCart=this.addToCart.bind(this);\n    this.addTestingValues=this.addTestingValues.bind(this);\n    this.onCheckout=this.onCheckout.bind(this);\n\n    this.getFoodItems();\n\n  }\n\n  async getFoodItems(){\n    await fetch('http://localhost:8080/foodItems', {\n      method: 'GET',\n    })\n    .then(response => response.json())\n    .then(responseJSON => {\n      let newItems = responseJSON;\n      for (let i = 0; i < newItems.length; i++) {\n        newItems[i].amountToBuy = 0;\n        for (let j = 0; j < this.props.location.state.cart.length; j++) {\n          if (newItems[i].seller === this.props.location.state.cart[j].seller && newItems[i].name === this.props.location.state.cart[j].name) {\n            newItems[i].amountToBuy = this.props.location.state.cart[j].amountToBuy;\n            newItems[i].amount = +newItems[i].amount - +newItems[i].amountToBuy;\n          }\n        }\n      }\n      this.setState({items: newItems});\n    })\n    .catch(err => {\n      throw new Error(err)\n    })\n  }\n\n  async postFood(newItem) {\n    await fetch('http://localhost:8080/foodItem', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(newItem)\n    })\n    .then(() => this.getFoodItems())\n    .catch(err => {\n      throw new Error(err)\n    })\n  }\n\n  async deleteFood(seller, name) {\n    await fetch(`http://localhost:8080/foodItem/${seller}/${name}`, {\n      method: 'DELETE',\n    })\n    .then(() => this.getFoodItems())\n    .catch(err => {\n      throw new Error(err)\n    })\n  }\n\n  addFood(event) {\n    event.preventDefault();\n\n    let newItem = {seller: this.state.newSeller, name: this.state.newName,\n                  price: this.state.newPrice, amount: this.state.newAmount,\n                  pickup: this.state.newPickup, delivery: this.state.newDelivery};\n\n    this.postFood(newItem);\n\n    //Reset input boxes\n    this.setState({newSeller: \"\"});\n    this.setState({newName: \"\"});\n    this.setState({newPrice: \"\"});\n    this.setState({newAmount: \"\"});\n    this.setState({newPickup: \"\"});\n    this.setState({newDelivery: \"\"});\n  }\n\n  handleTextChange(event) {\n    const value = event.target.value;\n    this.setState({\n      [event.target.name]: value\n    });\n  }\n\n  discard(seller, name) {\n    this.deleteFood(seller, name);\n  }\n\n  addToCart(idx, amountToBuy, isDelivery) {\n    if (amountToBuy > 0) {\n      let newItems = this.state.items;\n      newItems[idx].amountToBuy = +newItems[idx].amountToBuy + +amountToBuy;\n      newItems[idx].amount = +newItems[idx].amount - +amountToBuy;\n      newItems[idx].isDelivery = isDelivery;\n      this.setState( {items: newItems });\n    }\n  }\n\n  addTestingValues() {\n    let newFood = {seller: \"Inc\", name: \"Tomatoes\", price: 1.23, amount: 15, pickup: \"112 Foods Inc Dr\", delivery: 5.99};\n    this.postFood(newFood);\n    newFood = {seller: \"Inc\", name: \"Cabbages\", price: 0.78, amount: 9, pickup: \"112 Foods Inc Dr\", delivery: 5.99};\n    this.postFood(newFood);\n    newFood = {seller: \"Ultimate\", name: \"Pasta\", price: 3.45, amount: 2, pickup: \"Ultimate Avenue\", delivery: \"Free\"};\n    this.postFood(newFood);\n    newFood = {seller: \"Food Lion\", name: \"Mushrooms\", price: 2, amount: 10, pickup: \"Avent Ferry Dr\", delivery: \"2.99\"};\n    this.postFood(newFood);\n    newFood = {seller: \"Lowes' Foods\", name: \"Bananas\", price: 1.50, amount: 50, pickup: \"NC State Campus Dr\", delivery: \"5.99\"};\n    this.postFood(newFood);\n  }\n\n  onCheckout() {\n    let newCart = [];\n    for (let i = 0; i < this.state.items.length; i++) {\n      if (this.state.items[i].amountToBuy > 0) {\n        newCart.push(this.state.items[i]);\n      }\n    }\n    this.setState({ cart: newCart });\n\n    this.setState({ checkout: true });\n  }\n\n  renderCards() {\n    if (this.state.items.length <= 0) {\n      return (\n        <h2>No items in the store, sorry!</h2>\n      );\n    }\n    var cards = [];\n    for (let i = 0; i < this.state.items.length; i++) {\n      cards.push(<Card\n              key={i}\n              id={i}\n              seller={this.state.items[i].seller}\n              name={this.state.items[i].name}\n              price={this.state.items[i].price}\n              amount={this.state.items[i].amount}\n              pickup={this.state.items[i].pickup}\n              delivery={this.state.items[i].delivery}\n              addToCart={this.addToCart}\n            />);\n    }\n    return cards;\n  }\n\n  render() {\n    if (this.state.user === \"\") {\n        return(\n          <Redirect to=\"/\" />\n        );\n    }\n\n    if (this.state.checkout) {\n      return (\n        <Redirect to={{ pathname: '/checkout', state: { user: this.state.user, cart: this.state.cart} }} />\n      );\n    }\n\n    return (\n      <div>\n        {this.renderCards()}\n        <br />\n        <br />\n        <button id=\"checkoutButton\" onClick={this.onCheckout}>\n          View Cart\n        </button>\n        <br />\n\n        <br />\n        <button id=\"addTestingValues\" onClick={this.addTestingValues}>\n          Populate with testing items\n        </button>\n\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}