{"ast":null,"code":"var _jsxFileName = \"/Users/neelpatel/Desktop/Classes/342/Project/frontend-react/src/login.js\";\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loggedIn: false,\n      user: \"\",\n      newUser: \"\"\n    };\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.login = this.login.bind(this);\n    this.createUser = this.createUser.bind(this);\n    this.getUser = this.getUser.bind(this);\n    this.postUser = this.postUser.bind(this);\n  }\n\n  async getUser(name) {\n    await fetch(`http://localhost:8080/user/${name}`, {\n      method: 'GET'\n    }).then(response => response.json()).then(responseJSON => {\n      this.setState({\n        loggedIn: true\n      });\n    }).catch(err => {\n      throw new Error(err);\n    });\n  }\n\n  async postUser(newUser) {\n    await fetch('http://localhost:8080/user', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(newUser)\n    }).then(response => {\n      if (!response.ok) {\n        throw new Error();\n      }\n    });\n  }\n\n  async login(event) {\n    event.preventDefault();\n\n    try {\n      await this.getUser(this.state.user);\n    } catch (err) {\n      alert(\"User does not exist\");\n    }\n  }\n\n  async createUser(event) {\n    event.preventDefault();\n\n    try {\n      let newUser = {\n        name: this.state.newUser\n      };\n      await this.postUser(newUser);\n      alert(\"User created\");\n    } catch (err) {\n      alert(\"User already exists!\");\n    }\n  }\n\n  handleTextChange(event) {\n    const value = event.target.value;\n    this.setState({\n      [event.target.name]: value\n    });\n  }\n\n  renderForm() {\n    if (this.state.loggedIn) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: {\n          pathname: '/shop',\n          state: {\n            user: this.state.user\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: this.login,\n          children: [\"Username: \", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"user\",\n            value: this.state.user,\n            onChange: this.handleTextChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"loginButton\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Create user\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login\",\n        children: [/*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: this.createUser,\n          children: [\"Username: \", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"newUser\",\n            value: this.state.newUser,\n            onChange: this.handleTextChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"createUserButton\",\n            children: \"Create User\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: this.renderForm()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/neelpatel/Desktop/Classes/342/Project/frontend-react/src/login.js"],"names":["React","Redirect","Login","Component","constructor","props","state","loggedIn","user","newUser","handleTextChange","bind","login","createUser","getUser","postUser","name","fetch","method","then","response","json","responseJSON","setState","catch","err","Error","headers","body","JSON","stringify","ok","event","preventDefault","alert","value","target","renderForm","pathname","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Redirect } from 'react-router-dom';\n\nexport default class Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loggedIn: false,\n      user: \"\",\n      newUser: \"\",\n    };\n    this.handleTextChange=this.handleTextChange.bind(this);\n    this.login=this.login.bind(this);\n    this.createUser=this.createUser.bind(this);\n    this.getUser=this.getUser.bind(this);\n    this.postUser=this.postUser.bind(this);\n  }\n\n  async getUser(name) {\n    await fetch(`http://localhost:8080/user/${name}`, {\n      method: 'GET',\n    })\n    .then(response => response.json())\n    .then(responseJSON => {\n      this.setState({ loggedIn: true })\n    })\n    .catch(err => {\n      throw new Error(err);\n    })\n  }\n\n  async postUser(newUser) {\n    await fetch('http://localhost:8080/user', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(newUser)\n    }).then(response => {\n      if (!response.ok){\n        throw new Error();\n      }\n    })\n  }\n\n  async login(event) {\n    event.preventDefault();\n\n    try {\n      await this.getUser(this.state.user);\n    } catch (err) {\n      alert(\"User does not exist\");\n    }\n  }\n\n  async createUser(event) {\n    event.preventDefault();\n\n    try {\n      let newUser = {name: this.state.newUser};\n      await this.postUser(newUser);\n      alert(\"User created\");\n    } catch (err) {\n      alert(\"User already exists!\");\n    }\n  }\n\n  handleTextChange(event) {\n    const value = event.target.value;\n    this.setState({\n      [event.target.name]: value\n    });\n  }\n\n  renderForm() {\n    if (this.state.loggedIn) {\n      return (\n        <Redirect to={{ pathname: '/shop', state: { user: this.state.user} }} />\n      );\n    }\n\n    return (\n      <div>\n        <h2>Login</h2>\n        <div className=\"login\">\n          <form onSubmit={this.login}>\n            Username: <input type=\"text\" name=\"user\" value={this.state.user} onChange={this.handleTextChange}></input>\n            <br />\n            <button id=\"loginButton\">\n              Login\n            </button>\n          </form>\n        </div>\n        <br />\n        <br />\n        <h2>Create user</h2>\n        <div className=\"login\">\n          <form onSubmit={this.createUser}>\n            Username: <input type=\"text\" name=\"newUser\" value={this.state.newUser} onChange={this.handleTextChange}></input>\n            <br />\n            <button id=\"createUserButton\">\n              Create User\n            </button>\n          </form>\n          <br />\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        {this.renderForm()}\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}